#!/bin/bash

{{/* Build the Node.js installation commands first */}}
{{- $nodejs_commands := "" -}}

{{- if .packages.nodejs -}}
  {{- range .packages.nodejs.versions }}
    {{- $nodejs_commands = print $nodejs_commands "echo \"ðŸ”§  Installing Node.js " . "...\"\n" -}}
    {{- $nodejs_commands = print $nodejs_commands "fnm install " . "\n" -}}
  {{- end }}
  {{- $nodejs_commands = print $nodejs_commands "echo \"ðŸŽ¯  Setting default Node.js version to " .packages.nodejs.default "...\"\n" -}}
  {{- $nodejs_commands = print $nodejs_commands "fnm use " .packages.nodejs.default "\n" -}}
  {{- $nodejs_commands = print $nodejs_commands "fnm default " .packages.nodejs.default "\n" -}}
  {{- $nodejs_commands = print $nodejs_commands "echo \"âœ…  Node.js installation complete!\"\n" -}}
  {{- $nodejs_commands = print $nodejs_commands "fnm ls\n" -}}
{{- end -}}

echo "ðŸ“¦  Installing Node.js versions..."

{{ $nodejs_commands }}
